(window.webpackJsonpexchange=window.webpackJsonpexchange||[]).push([[0],{27:function(e,n,t){e.exports=t(39)},36:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a,r=t(1),c=t.n(r),u=t(9),l=t.n(u),o=t(15);!function(e){e.CHANGE_EXCHANGE_VALUE="CHANGE_EXCHANGE_VALUE ",e.CONFIRM_EXCHANGE="CONFIRM_EXCHANGE",e.SWITCH_EXCHANGE="SWITCH_EXCHANGE",e.SELECT_CURRENCY="SELECT_CURRENCY",e.FETCH_EXCHANGE_RATE="FETCH_EXCHANGE_RATE"}(a||(a={}));var i=t(14),s=function(e){return e.exchange},C=Object(i.a)([s],(function(e){return e.sellOut})),d=Object(i.a)([s],(function(e){return e.buyIn})),y=Object(i.a)([s],(function(e){return e.initBalances})),h=Object(i.a)([s],(function(e){return e.allCurrencies})),p=t(3),E=t(4),v=t(5),b=t(6),f=t(7),O=(t(36),function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(v.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(r)))).handleChange=function(e){t.props.onInputChange(e.target.value,t.props.isSellingOut)},t}return Object(f.a)(n,e),Object(E.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.isSellingOut,a=n.exchange.value;return c.a.createElement("div",null,a>0&&c.a.createElement("span",null,t?"-":"+"),c.a.createElement("input",{type:"number",value:a,onChange:function(n){return e.handleChange(n)}}))}}]),n}(c.a.Component)),m=t(26),g=function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(v.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(r)))).handleOnClick=function(e){console.log(e),t.props.onSelectCurrency(e.value,t.props.isSellingOut)},t}return Object(f.a)(n,e),Object(E.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.allCurrencies,a=n.selectedCurrencyCode,r=t.map((function(e){return{value:e.code,label:e.code}})),u={value:a,label:a};return c.a.createElement(m.a,{classNamePrefix:"currency-list",value:u,onChange:function(n){return e.handleOnClick(n)},options:r})}}]),n}(c.a.Component),j=function(e){function n(){return Object(p.a)(this,n),Object(v.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(E.a)(n,[{key:"render",value:function(){var e=this.props,n=e.allCurrencies,t=e.initBalance,a=e.exchange,r=e.isSellingOut,u=e.onInputChange,l=e.onSelectCurrency,o=n.find((function(e){return e.code===a.currencyCode}));return c.a.createElement("div",{className:r?"area area--sellout":"area area--buyin"},c.a.createElement("div",{className:"area__pocket"},c.a.createElement(g,{allCurrencies:n,onSelectCurrency:l,selectedCurrencyCode:a.currencyCode,isSellingOut:r}),c.a.createElement("div",{className:"area__balance"},"Balance: ",o&&o.symbol,t.value)),c.a.createElement("div",{className:"area__input"},c.a.createElement(O,{isSellingOut:r,exchange:a,onInputChange:u})))}}]),n}(c.a.Component),N=function(e){function n(){return Object(p.a)(this,n),Object(v.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(E.a)(n,[{key:"render",value:function(){var e=this.props.disabled?"exchange-button primary-button disabled":"exchange-button primary-button";return c.a.createElement("div",{className:e,onClick:this.props.onClickExchange},"Exchange")}}]),n}(c.a.Component),_=function(e){function n(){return Object(p.a)(this,n),Object(v.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(E.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:"switch-button",onClick:this.props.onSwitchExchange})}}]),n}(c.a.Component),I=function(e){function n(){return Object(p.a)(this,n),Object(v.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(E.a)(n,[{key:"render",value:function(){var e=this.props,n=e.sellOutCurrency,t=e.buyInCurrency;return c.a.createElement("div",{className:"exchange-rate"},n&&t&&c.a.createElement("div",null,"1",n.symbol," = ",(1/n.rate*t.rate).toFixed(4),t.symbol))}}]),n}(c.a.Component),S=function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(v.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(r)))).timer=0,t}return Object(f.a)(n,e),Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchExchangeRate()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=0}},{key:"render",value:function(){var e=this.props,n=e.initBalances,t=e.exchange,a=e.onClickExchange,r=e.onSwitchExchange,u=e.allCurrencies,l=t.sellOut,o=n.find((function(e){return e.currencyCode===l.currencyCode})),i=t.buyIn,s=n.find((function(e){return e.currencyCode===i.currencyCode})),C=u.find((function(e){return e.code===l.currencyCode})),d=u.find((function(e){return e.code===i.currencyCode})),y=!o||(o.value<l.value||0===l.value||l.currencyCode===i.currencyCode);return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"app__title"},"Exchange"),c.a.createElement("div",{className:"area-container"},o?c.a.createElement(j,{allCurrencies:u,initBalance:o,exchange:l,onInputChange:this.props.onInputChange,onSelectCurrency:this.props.onSelectCurrency,isSellingOut:!0}):c.a.createElement("div",null,"Sell Out Balance is not available."),c.a.createElement("div",{className:"area__middle"},c.a.createElement(_,{onSwitchExchange:r}),C&&d&&c.a.createElement(I,{sellOutCurrency:C,buyInCurrency:d})),s?c.a.createElement(j,{allCurrencies:u,initBalance:s,exchange:i,onInputChange:this.props.onInputChange,onSelectCurrency:this.props.onSelectCurrency,isSellingOut:!1}):c.a.createElement("div",null,"Buy In Balance is not available.")),c.a.createElement(N,{onClickExchange:a,disabled:y}))}}]),n}(c.a.Component),x={onInputChange:function(e,n){return{type:a.CHANGE_EXCHANGE_VALUE,payload:{value:e,isSellingOut:n}}},onClickExchange:function(){return{type:a.CONFIRM_EXCHANGE,payload:{}}},onSwitchExchange:function(){return{type:a.SWITCH_EXCHANGE,payload:{}}},onSelectCurrency:function(e,n){return{type:a.SELECT_CURRENCY,payload:{selectedCurrencyCode:e,isSellingOut:n}}},fetchExchangeRate:function(){return{type:a.FETCH_EXCHANGE_RATE,payload:{}}}},A=Object(o.b)((function(e){return{initBalances:y(e),exchange:{sellOut:C(e),buyIn:d(e)},allCurrencies:h(e)}}),x)(S);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=t(25),G=t.n(H),k=t(13),w="144b758706f04d23817d346d321e63d7",R={initBalances:[{currencyCode:"GBP",value:100},{currencyCode:"EUR",value:0},{currencyCode:"USD",value:0},{currencyCode:"CHF",value:0},{currencyCode:"CNY",value:0}],sellOut:{currencyCode:"GBP",value:0},buyIn:{currencyCode:"EUR",value:0},allCurrencies:[{code:"GBP",symbol:"\xa3",rate:.8},{code:"EUR",symbol:"\u20ac",rate:.91},{code:"USD",symbol:"$",rate:1},{code:"CHF",symbol:"CHF",rate:.99},{code:"CNY",symbol:"\xa5",rate:7.09}]};function B(e,n){if("undefined"===typeof n||0===+n)return Math.round(e);if(e=+e,n=+n,isNaN(e)||"number"!==typeof n||n%1!==0)return NaN;var t=e.toString().split("e");return+((t=(e=Math.round(+(t[0]+"e"+(t[1]?+t[1]+n:n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]-n:-n))}var T={exchange:R},X=Object(k.c)({exchange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case a.CHANGE_EXCHANGE_VALUE:var t=n.payload.value,r=n.payload.isSellingOut,c=e,u=e.allCurrencies.find((function(n){return n.code===e.sellOut.currencyCode})),l=e.allCurrencies.find((function(n){return n.code===e.buyIn.currencyCode}));return u&&l&&(r?(c.sellOut.value=B(t,2),c.buyIn.value=B(t/u.rate*l.rate,2)):(c.sellOut.value=B(t/l.rate*u.rate,2),c.buyIn.value=B(t,2))),Object.assign({},e,c);case a.CONFIRM_EXCHANGE:var o=e;return o.initBalances=o.initBalances.map((function(n){var t=n;return n.currencyCode===e.sellOut.currencyCode?t.value=B(n.value-e.sellOut.value,2):n.currencyCode===e.buyIn.currencyCode&&(t.value=B(n.value+e.buyIn.value,2)),t})),o.buyIn.value=0,o.sellOut.value=0,Object.assign({},e,o);case a.SWITCH_EXCHANGE:var i=e,s=e.sellOut,C=e.buyIn;return i.buyIn=s,i.sellOut=C,Object.assign({},e,i);case a.SELECT_CURRENCY:var d=e,y=e.allCurrencies.find((function(e){return e.code===n.payload.selectedCurrencyCode}));if(y)if(n.payload.isSellingOut){d.sellOut.currencyCode=y.code;var h=e.allCurrencies.find((function(n){return n.code===e.buyIn.currencyCode}));h&&(d.buyIn.value=B(d.sellOut.value/y.rate*h.rate,2))}else{d.buyIn.currencyCode=y.code;var p=e.allCurrencies.find((function(n){return n.code===e.sellOut.currencyCode}));p&&(d.sellOut.value=B(d.buyIn.value/y.rate*p.rate,2))}return Object.assign({},e,d);case a.FETCH_EXCHANGE_RATE:var E=e;return fetch("https://openexchangerates.org/api/latest.json?app_id="+w).then((function(e){return e.json()})).then((function(e){if(e.error)throw e.error;var n=e.rates;E.allCurrencies.map((function(e){var t=e,a=t.code;return n[a]&&(t.rate=n[a]),t}))})).catch((function(e){console.log(e)})),Object.assign({},e,E);default:return e}}}),U=Object(k.d)(X,T,Object(k.a)(G.a));l.a.render(c.a.createElement(o.a,{store:U},c.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.cbef99cc.chunk.js.map